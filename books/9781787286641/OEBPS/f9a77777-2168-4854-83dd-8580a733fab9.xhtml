<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns:pls="http://www.w3.org/2005/01/pronunciation-lexicon" xmlns:ssml="http://www.w3.org/2001/10/synthesis" xmlns:svg="http://www.w3.org/2000/svg">
<head>
  <meta charset="UTF-8" />
  <title>Setting the sidebar</title>
  <link type="text/css" rel="stylesheet" media="all" href="style.css" />
  <link type="text/css" rel="stylesheet" media="all" href="core.css" />
</head>
<body>
  <div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Setting the sidebar</h1>
                </header>
            
            <article>
                
<p>Let's now get the sidebar set up so that we can add sidebar widgets:</p>
<ol>
<li>In the <kbd>functions.php</kbd> file underneath the <kbd>add_action()</kbd>, we will create a function called <kbd>init_widgets()</kbd> and that's going to take in an <kbd>id</kbd>. We will add <kbd>register_sidebar()</kbd> and that's going to take in an <kbd>array</kbd>. And then we have a bunch of options, so let's add <kbd>'name' =&gt; 'Sidebar'</kbd> and <kbd>'id' =&gt; 'sidebar'</kbd>.</li>
</ol>
<pre>      // Widget Locations<br/>      function init_widgets($id){<br/>          register_sidebar(array(<br/>              'name' =&gt; 'Sidebar',<br/>              'id'   =&gt; 'sidebar'<br/>          ));<br/>      }</pre>
<p style="padding-left: 60px">We can also include other things here; for instance, we can add <kbd>'before_widget'</kbd>:</p>
<pre>      'id' =&gt; 'sidebar',<br/>      'before_widget' =&gt; '&lt;div class="panel panel-default"&gt;'</pre>
<p style="padding-left: 60px">Now what this does is it allows us to insert code right before the widget renders. We'll need this because we want our widgets to render inside Bootstrap panels, so we need to include the panel classes. We can see we have a <kbd>div</kbd> with a class of <kbd>panel</kbd>, and also <kbd>panel-default</kbd>.</p>
<ol start="2">
<li>Let's then add <kbd>'after_widget'</kbd> and that's just going to be two ending div tags:</li>
</ol>
<pre style="padding-left: 60px">'after_widget' =&gt; '&lt;/div&gt;&lt;/div&gt;',</pre>
<p style="padding-left: 60px">We now also have the ability to add content before and after the title.</p>
<ol start="3">
<li>To use this, we'll use <kbd>'before_title'</kbd> and this is going to have a div with the class of <kbd>panel-heading</kbd>. We also want the <kbd>&lt;h3&gt;</kbd> tag, and we'll give that a class of <kbd>panel-title</kbd>:</li>
</ol>
<pre>      'before_title' =&gt; '&lt;div class="panel-heading"&gt;<br/>        &lt;h3 class="panel-title"&gt;',</pre>
<ol start="4">
<li>Finally, we'll add <kbd>'after_title'</kbd> with ending <kbd>&lt;/h3&gt;</kbd> and <kbd>&lt;/div&gt;</kbd>, and then we also want the start of the <kbd>panel-body</kbd> class:</li>
</ol>
<pre>      'after_title' =&gt; '&lt;/h3&gt;&lt;/div&gt;&lt;div class="panel-body"&gt;'</pre>
<ol start="5">
<li>Now we need to add an action, so we'll place <kbd>add_action()</kbd>. The hook will be <kbd>widgets_init</kbd> with the function <kbd>init_widgets</kbd>:</li>
</ol>
<pre>      add_action('widgets_init', 'init_widgets');</pre>
<ol start="6">
<li>Save it. If we now go to the backend and reload the page, you should now have a <span class="packt_screen">Widgets</span> option under <span class="packt_screen">Appearance</span>, and you should also see <span class="packt_screen">Sidebar</span>:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img height="1024" width="1280" class="aligncenter size-full wp-image-1217 image-border" src="images/c17ea1b1-b648-40e0-853b-18fa08af1286.png" /></div>
<ol start="7">
<li>Now let's bring over <span class="packt_screen">Categories</span>, and hit <span class="packt_screen">Save</span>:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img height="203" width="275" class="aligncenter size-full wp-image-1219 image-border" src="images/86748060-c583-4b11-a738-8b08bc1a6acd.png" /></div>
<ol start="8">
<li>Let's see if those render:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img height="365" width="729" class="aligncenter size-full wp-image-1220 image-border" src="images/a64d13db-97e5-4885-ae7e-d64f14ac824a.png" /></div>
<p style="padding-left: 60px">So now we have our categories and you can see that now we have the panel around it as well.</p>
<ol start="9">
<li>Let's also bring over <span class="packt_screen">Recent Posts</span>, change <span class="packt_screen">Number of posts to show</span> to <kbd>3</kbd>, and bring over <span class="packt_screen">Recent Comments</span>:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img height="400" width="378" class="aligncenter size-full wp-image-1221 image-border" src="images/45d55438-64e4-4948-92d7-57bc1c01e23d.png" /></div>
<ol start="10">
<li>Let's take a look at our page now:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img height="776" width="970" class="aligncenter size-full wp-image-1223 image-border" src="images/02c88d4f-0e11-4acb-8d0f-8b6856b1ea49.png" /></div>
<p style="padding-left: 60px">And there they are! Now we have an issue because I want the categories to show up as list groups, which are formatted better than this. They take away the bullets, add some padding, and add some borders. So what we'll need to do is create our own version of these widgets inside our <kbd>theme</kbd> folder.</p>
<ol start="11">
<li>Inside the <kbd>theme</kbd> folder, we'll create another folder called <kbd>widgets</kbd>. We'll go to this folder through the file manager. Now go to <kbd>wp-includes</kbd> | <kbd>widgets</kbd>. You'll see all of the core widget files here:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img height="602" width="1280" class="aligncenter size-full wp-image-1224 image-border" src="images/728d20e1-216e-4c99-a015-63554285730e.png" /></div>
<ol start="12">
<li>We want to grab the categories, the recent comments, and the recent posts. We'll copy (make sure you don't cut, but copy them) and paste them into our <kbd>widgets</kbd> folder.</li>
<li>Now let's start with the categories one. Let's open that up through Sublime Text. <span>Here we will change the classname: put an <kbd>_</kbd> and then <kbd>Custom</kbd>.</span></li>
</ol>
<pre>      class WP_Widget_Categories_Custom extends WP_Widget {</pre>
<ol start="14">
<li>Next, we will change the class names for the <kbd>&lt;ul&gt;</kbd> and <kbd>&lt;li&gt;</kbd> tags. We will add the Bootstrap classes. For this, we will add <kbd>class="list-group"</kbd> to the <kbd>&lt;ul&gt;</kbd> tag:</li>
</ol>
<pre>      &lt;ul class="list-group"&gt;</pre>
<ol start="15">
<li>Now we also want the list items to have the class of <kbd>list-group-item</kbd> but the way that this is set up, we can't access the list item tags from within. So we need to do a little bit of customization in the <kbd>functions.php</kbd> file.</li>
</ol>
<p style="padding-left: 60px"><span>So let's open the <kbd>function.php</kbd> file, go to the very bottom, and add a comment first: <kbd>Adds 'list-group-item' to categories li</kbd>, just so we know what it does. Then we add the function <kbd>add_new_class_list_categories()</kbd>:</span></p>
<pre>      // Adds 'list-group-item' to categories li<br/>      function add_new_class_list_categories(){</pre>
<ol start="16">
<li>We will then pass in a variable by adding <kbd>$list = str_replace()</kbd>, and we'll add <kbd>cat-item</kbd>, which is the original class name, but we want to change that. Now we still want it to have the <kbd>cat-item</kbd> class because it needs that, but we also want to add on the <kbd>list-group-item class</kbd>. Then we just need to return the list.</li>
</ol>
<pre>      function add_new_class_list_categories($list){<br/>      $list = str_replace('cat-item', 'cat-item list-group-item', <br/>        $list);<br/>      return $list;</pre>
<ol start="17">
<li>Now instead of adding an action, we will add <kbd>add_filter()</kbd>. Basically, an action is used when you want to add something, a filter is when you want to change something. <span>So let's use <kbd>add_filter('wp_list_categories')</kbd> and then we place the name of our function:</span></li>
</ol>
<pre>      add_filter('wp_list_categories', <br/>        'add_new_class_list_categories');</pre>
<ol start="18">
<li>We're not out of the woods yet with these widgets; we have to register them. So before we do that, we need to include them at the top or use <kbd>require</kbd>. So we will add <kbd>require_once()</kbd>. It's going to be the <kbd>widgets</kbd> folder, and then we just need to include each widget. We'll use <kbd>class-wp-widget-categories.php</kbd>:</li>
</ol>
<pre>      require_once('widgets/class-wp-widget-categories.php');</pre>
<ol start="19">
<li>We might as well include all of them. So we will get the recent posts and recent comments:</li>
</ol>
<div>
<pre>      require_once('widgets/class-wp-widget-recent-posts.php');<br/>      require_once('widgets/class-wp-widget-recent-comments.php');</pre></div>
<p style="padding-left: 60px">Now we need to register.</p>
<ol start="20">
<li>Down at the bottom, we'll add <kbd>function wordstrap_register_widgets()</kbd>. We need the classname as well, so we add <kbd>'WP_Widget_Recent_Posts_Custom'</kbd>. Next one will be <kbd>'WP_Widget_Recent_Comments_Custom'</kbd>. The last one will be to add <kbd>'WP_Widget_Categories_Custom'</kbd>:</li>
</ol>
<pre>      //Register Widgets<br/>      function wordstrap_register_widgets(){<br/>          register_widget('WP_Widget_Recent_Posts_Custom');<br/><span>          register_widget('WP_Widget_Recent_Comments_Custom');<br/>          register_widget('WP_Widget_Categories_Custom');<br/></span>      }</pre>
<ol start="21">
<li>Now we add another <kbd>add_action()</kbd>, and this is going to be again on <kbd>'widgets_init'</kbd>, and then we just need the name of the function:</li>
</ol>
<pre>      add_action('widgets_init', 'wordstrap_register_widgets');</pre>
<ol start="22">
<li>Let's save that and reload the page:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img height="431" width="1280" class="aligncenter size-full wp-image-1225 image-border" src="images/4395db0c-136f-454a-b8ad-0c7ed0cf2ece.png" /></div>
<ol start="23">
<li>We get an error: <span class="packt_screen">Cannot declare class Recent_Posts</span>. So let's verify our code:</li>
</ol>
<pre>      class WP_Widgets_Recent_Posts_Customs extends WP_Widget {<br/><span>      class WP_Widgets_Recent_Comments_Customs extends WP_Widget {</span></pre>
<p style="padding-left: 60px">So these should have <kbd>_Custom</kbd> as well. Now reload the page:</p>
<div class="CDPAlignCenter CDPAlign"><img height="776" width="970" class="aligncenter size-full wp-image-1226 image-border" src="images/3cf9cbf5-dbf0-4970-9c8d-562044de5358.png" /></div>
<p style="padding-left: 60px">So we have all of our widgets registered and categories now has the <kbd>list-item</kbd> class, so that looks good. We also want to add these classes to recent posts and recent comments as well, so that instead of the bullet points we have it look like how categories look.</p>
<ol start="24">
<li>So let's go to our <kbd>class-wp-widget-recent-posts.php</kbd> widget file, and we want to go to the <kbd>&lt;ul&gt;</kbd> tag. We will just add a class of <kbd>list-group</kbd> and then the <kbd>&lt;li&gt;</kbd> tag will have a class of <kbd>list-group-item</kbd>:</li>
</ol>
<pre><strong>      &lt;ul class="list-group"&gt;</strong><br/>      &lt;?php foreach ( $r-&gt;posts as $recent_post ) : ?&gt;<br/>         <strong>&lt;li class="list-group-item"&gt;</strong></pre>
<p style="padding-left: 60px">Let's reload the page; that looks good!</p>
<div class="CDPAlignCenter CDPAlign"><img height="233" width="377" class="aligncenter size-full wp-image-1227 image-border" src="images/4797efb3-c356-4127-a0e4-196d36cbe966.png" /></div>
<ol start="25">
<li>Now let's go to <kbd><span>class-wp-widget-recent-c</span>omments.php</kbd>. We will add a class to <kbd>&lt;ul&gt;</kbd> of <kbd>list-group</kbd> and then for the <kbd>&lt;li&gt;</kbd> tag, we'll add a class of <kbd>list-group-item</kbd>:</li>
</ol>
<pre>      $output .= '&lt;ul class="list-group" id="recentcomments"&gt;';<br/>      if(is_array($comments) &amp;&amp; $comments){<br/>      $post_ids = array_unique(wp_list_pluck($comments, 'comment_post_ID'));<br/>      _prime_post_caches($post_ids, strpos(get_option('permalink_structure'), <br/>      '%category'), false);<br/>      foreach((array) $comments as $comment){<br/>          $output .= '&lt;li class="list-group-item recentcomments"&gt;';</pre>
<p style="padding-left: 60px">Save, reload, and there we go:</p>
<div class="CDPAlignCenter CDPAlign"><img height="167" width="404" class="aligncenter size-full wp-image-1228 image-border" src="images/be572406-3346-4e6a-9b39-ee5c8a4e3e75.png" /></div>
<p>So now we have some custom widgets. You could make widgets look totally different if you want to, and it would only affect these widgets when your theme is loaded so that you're not editing any core WordPress code. We have our navbar set up as well as our sidebar widgets.</p>


            </article>

            
        </section>
    </div>
</body>
</html>