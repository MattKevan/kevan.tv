<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns:pls="http://www.w3.org/2005/01/pronunciation-lexicon" xmlns:ssml="http://www.w3.org/2001/10/synthesis" xmlns:svg="http://www.w3.org/2000/svg">
<head>
  <meta charset="UTF-8" />
  <title>Displaying blog post</title>
  <link type="text/css" rel="stylesheet" media="all" href="style.css" />
  <link type="text/css" rel="stylesheet" media="all" href="core.css" />
</head>
<body>
  <div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Displaying blog post</h1>
                </header>
            
            <article>
                
<p>We created the theme and added the header and navigation bar. All of this stuff on the page is now dynamic and integrated with WordPress, but this is all just static HTML.</p>
<p>Let's go back to our <kbd>index.php</kbd> page and go down to where we have the <kbd>container content</kbd> div, and we have different blog posts. We have three <kbd>article</kbd> tags with blog posts; we will delete two out of the three.</p>
<p>Then we will cut the paragraphs down and make it much shorter just so we can get it all in the page or in view. We want to write in this <kbd>main block</kbd> div, and we want to create our post loop.</p>
<p>First, we'll have to check for posts, and for that, we will enter <kbd>if(have_posts)</kbd><span>,</span>and then we have to end it after the ending <kbd>&lt;/article&gt;</kbd> tag. We will put an <kbd>else</kbd> statement as well. If there are no posts, then we will enter <kbd>php echo</kbd>, with <span>the</span> <kbd>wpautop()</kbd> function, where we can put the text that we want. In this case, we enter <kbd>'Sorry, no posts were found'</kbd>. Then, we will create our <kbd>while</kbd> loop, and then down under the <kbd>&lt;/article&gt;</kbd> tag, we will end that <kbd>while</kbd> loop:</p>
<pre>&lt;div class="container content"&gt;<br/>   &lt;div class="main block"&gt;<br/>      &lt;?php if(have_posts()) : ?&gt;<br/>         &lt;?php while(have_posts()) : the_post(); ?&gt;<br/>            &lt;article class="post"&gt;<br/>            &lt;h2&gt;&lt;?php the_title(); ?&gt;&lt;/h2&gt;<br/>            &lt;p class="meta"&gt;Posted at 11:00 on May 9 by admin<br/>            &lt;/p&gt;<br/>            &lt;?php the_content(); ?&gt;<br/>            &lt;a class="button" href="#"&gt;Read More&lt;/a&gt;<br/>            &lt;/article&gt;<br/>         &lt;?php endwhile; ?&gt;<br/>      &lt;?php else : ?&gt;<br/>         &lt;?php echo wpautop('Sorry, no posts were found'); ?&gt;<br/>      &lt;?php endif; ?&gt;<br/> &lt;/div&gt;</pre>
<p><span>So it's going to loop through the posts and for every one it finds it's going to spit this out. Now to make it dynamic, we will use</span> <kbd>php the_title()</kbd> <span>and replace</span> the paragraph <span>with</span> <kbd>php the_content()</kbd><span>, as shown in the preceding code block. We'll save this, and reload:</span></p>
<div class="CDPAlignCenter CDPAlign"><img height="973" width="1280" class="aligncenter size-full wp-image-1032 image-border" src="images/e5ea51dc-d07e-442f-9ad2-839ba9ddcc29.png" /></div>
<p>Now we're on the <kbd>About</kbd> page; let's go back to the <kbd>Home</kbd> page, which we don't have a link for. When we click on <span class="packt_screen">WPThemes</span>, it should take us to the <kbd>Home</kbd> page, but if we click on it now, it takes us to <kbd>index.html</kbd>, so let's fix this.</p>
<p><span>We will update the</span> <kbd>index.html</kbd> file <span>with the following code:</span></p>
<pre>&lt;a href="&lt;?php echo home_url('/'); ?&gt;"&gt;<br/>   &lt;?php bloginfo('name'); ?&gt;</pre>
<p><span>Now if we reload and click on <span class="packt_screen">WPThemes</span>, we will get this:</span></p>
<div class="CDPAlignCenter CDPAlign"><img height="876" width="1280" class="aligncenter size-full wp-image-1034 image-border" src="images/2bf1519b-f586-4f6c-9198-00790433b04f.png" /></div>
<p>If we look at the posts, we get <span class="packt_screen">Blog Post One</span> and <span class="packt_screen">Blog Post Two</span>. Now you probably don't have these posts; you probably have a Hello World; if that's showing up, then that's fine. If you want to match your content to mine, just go ahead and create two posts, one as <kbd>Blog Post One</kbd>—I just have some sample content in it—and then <kbd>Blog Post Two</kbd> similarly:</p>
<div class="CDPAlignCenter CDPAlign"><img height="951" width="1280" class="aligncenter size-full wp-image-1035 image-border" src="images/f3e504b0-8a76-4fb0-ae5d-141a19a67c5a.png" /></div>
<p>You can also create some categories, it doesn't really matter what they are. We're not really dealing with specific content, it's just for a sample content:</p>
<div class="CDPAlignCenter CDPAlign"><img height="836" width="1280" class="aligncenter size-full wp-image-1036 image-border" src="images/38421276-b887-4d5c-8f7d-ef0f4e3bf90a.png" /></div>
<p>The meta info, as you can see, is still static, and so is the <span class="packt_screen">Read More</span> button. When we click on this button, it doesn't do anything. So let's fix that next. Back in our post loop, where we have <kbd>&lt;p class="meta"&gt;</kbd>, we will make the following changes to make it look dynamic:</p>
<pre>&lt;p class="meta"&gt;<br/>Posted at<br/>&lt;?php the_time(); ?&gt;<br/>by<br/>admin&lt;/p&gt;<br/>&lt;?php the_content(); ?&gt;<br/>&lt;a class="button" href="#"&gt;Read More&lt;/a&gt;</pre>
<p>Since we need to be more specific, for the date and time we use <kbd>the_time()</kbd>. If we just keep it like that, let's see what it gives us:</p>
<div class="CDPAlignCenter CDPAlign"><img height="78" width="200" class="aligncenter size-full wp-image-1037 image-border" src="images/a4d97327-fb8b-48f1-bfbb-e7455c9b5212.png" /></div>
<p>So it gives us just the time, <span class="packt_screen">11:55 am</span>. I want the date as well, so we'll format this. However, we want to do this by just adding some parameters. We have added <kbd>F j</kbd>, <kbd>Y</kbd>, and then for time, we'll add <kbd>g:i a</kbd>:</p>
<pre>&lt;?php the_time('F j, Y g:i a'); ?&gt;</pre>
<p>This pertains to the parameters of the <kbd>php date</kbd> function.</p>
<div class="packt_infobox">If you don't know how to format the time, you can go to <a href="http://php.net">php.net</a> and just search for the <kbd>date</kbd> function, and that should give you all the formatting options.</div>
<p>Now if I reload, it gives the date, month, day, year, and also the time:</p>
<div class="CDPAlignCenter CDPAlign"><img height="80" width="301" src="images/eddba4a1-d4ac-4bed-8841-be7224cbf291.png" /></div>
<p>Now we also want the username of the user that created the post. To do this, we can just put in <kbd>&lt;?php the_author(); ?&gt;</kbd>, as shown in the following code block:</p>
<pre>&lt;?php the_time('F j, Y g:i a'); ?&gt;<br/>by<br/>&lt;?php the_author(); ?&gt;&lt;/p&gt;<br/>&lt;?php the_content(); ?&gt;</pre>
<p>If we reload now, you can see that we still get <span class="packt_screen">admin</span> because that's the actual user's name. Now we want to be able to click on the author name and then have it bring us to all the posts archived from that user. This is pretty easy to do as well. We just want to put a link, as shown as follows. Inside the link, <span>we enter</span> <kbd>php echo get_author_posts_url()</kbd> <span>and then pass</span> <kbd>get_the_author_meta()</kbd> <span>and</span> <kbd>ID</kbd><span>:</span></p>
<pre>&lt;a href="&lt;?php echo get_author_posts_url(<br/>get_the_author_meta('ID')); ?&gt;"&gt;<br/>&lt;?php the_author(); ?&gt;<br/>&lt;/a&gt;</pre>
<p>Let's save this, and then if we reload, you can see that it's now a link. <span>We can't see it because of the color—we'll have to change the CSS—but if I click on it, it will take us to whatever the username is in the address bar, <kbd>auth/author/</kbd> the username;</span> <span>it will show you all the posts from that user:</span></p>
<div class="CDPAlignCenter CDPAlign"><img height="79" width="320" class="aligncenter size-full wp-image-1039 image-border" src="images/e34eefe8-3a7c-4dd8-8644-7a087d869892.png" /></div>
<p>Let's go into the CSS real quick and see where we have our <kbd>meta</kbd> class. We'll add <kbd>article.post .meta</kbd> a to it and set <kbd>color</kbd> to white, as shown here:</p>
<pre>article.post .meta{<br/>    background:#009acd;<br/>    color:#fff;<br/>    padding:7px;<br/>}<br/><br/>article.post .meta a{<br/>   color:#fff;<br/>}</pre>
<p>So now that's fixed.</p>
<div class="CDPAlignCenter CDPAlign"><img height="79" width="299" class="aligncenter size-full wp-image-1040 image-border" src="images/09f5d07a-d01e-431d-8501-ef187e1263e7.png" /></div>
<p>Now we can also get the categories that the post is in. To do this, we'll go back to the <kbd>index.php</kbd> file and we will update the code, as shown in the following code block:</p>
<pre>&lt;/a&gt;<br/>| Posted In <br/>&lt;?php<br/>    $categories = get_the_category();<br/>    $separator = ", ";<br/>    $output = '';<br/> <br/>    if($categories){<br/>        foreach($categories as $category){<br/>            $output .= '&lt;a href="'.get_category_link($category-&gt;term_id).'"&gt;'.<br/>            $category-&gt;cat_name.'&lt;/a&gt;'.$separator;<br/>        }<br/>    }<br/> <br/>    echo trim($output, $separator);<br/>?&gt;<br/>&lt;/p&gt;</pre>
<p><span>Right after the ending</span> <kbd>&lt;/a&gt;</kbd> <span>tag of what we just did, of the author, we will put in a pipe <kbd>|</kbd> character, and then open up some <kbd>php</kbd> tags. Before the <kbd>php</kbd> tags, we'll enter</span> <kbd>Posted In</kbd> <span>and then we can place all the categories. To do this, we'll set a</span> <kbd>categories</kbd> <span>variable and set it to</span> <kbd>get_the_category()</kbd><span>. Now this will give us an array of categories that this post is in. We can't just take the array and display it, so we have to loop through it. Before we do that, we'll create a variable called</span> <kbd>separator</kbd> <span>and separate that with a comma and a space. Then, we'll initialize a variable called</span> <kbd>output</kbd> <span>and set it to nothing for now. Next, we'll check for categories. To do this, we'll enter</span> <kbd>if($categories)</kbd><span>, then we'll use a</span> <kbd>foreach</kbd> <span>loop with</span> <kbd>($categories as $category)</kbd><span>. Next we'll append to that</span> <kbd>output</kbd> <span>variable, using</span> <kbd>.=</kbd><span>. Now for each category to have a link as well, we'll use</span> <kbd>href</kbd><span>. In order to do a little bit of concatenation here, we'll use dots and then add</span> <kbd>get_category_link()</kbd><span>. We need to pass in a parameter, we'll take that</span> <kbd>$category</kbd> <span>variable and call</span> <kbd>term_id</kbd><span>. Then we'll go back to our string right after the double quote, and we'll concatenate again, and enter</span> <kbd>$category-&gt;cat_name</kbd><span>, closing it with the</span> <kbd>&lt;/a&gt;</kbd> <span>tag. I know concatenation gets a little confusing, so</span> <span>we want a separator. Then, after the <kbd>if</kbd> statement, we'll use <kbd>echo</kbd> and wrap this in the</span> <kbd>trim()</kbd> <span>function to make it a little neater; we'll then enter <kbd>output</kbd>, and the second parameter will be</span> <kbd>separator</kbd>.</p>
<p>Let's save this and see what we get. Now you can see that it says <span class="packt_screen">Posted in Business</span>:</p>
<div class="CDPAlignCenter CDPAlign"><img height="81" width="428" src="images/f9170eb7-2f4b-472e-a361-f4b7966629e4.png" /></div>
<p>This one is <span class="packt_screen">Posted In Uncategorized</span>:</p>
<div class="CDPAlignCenter CDPAlign"><img height="76" width="443" class="aligncenter size-full wp-image-1043 image-border" src="images/e99d0b53-b83e-4df5-be63-ead75db28bad.png" /></div>
<p>Now if I click on <span class="packt_screen">Business</span>, it takes us to <kbd>category/business</kbd>, and you can see only this post is here; this is the only one in Business.</p>
<p>So this is working perfectly.</p>
<p>Now the last thing we want is the text to be shorter and the <span class="packt_screen">Read More</span> button to work. So we'll go to where we put the content, and to make it shorter, we can just change it to <kbd>the_excerpt();</kbd>, as shown here:</p>
<pre>&lt;/p&gt;<br/><strong>&lt;?php the_excerpt(); ?&gt;</strong><br/>&lt;a class="button" href="#"&gt;Read More&lt;/a&gt;</pre>
<p>If we look at it now, we have much shorter text:</p>
<div class="CDPAlignCenter CDPAlign"><img height="873" width="1280" class="aligncenter size-full wp-image-1044 image-border" src="images/ac759984-b982-4a99-8482-c8d5ee5aa932.png" /></div>
<p>Now, by default I think it's 55 words, but we can change this:</p>
<p>Let's go to <kbd>functions.php</kbd> <span>and add the</span> <kbd>excerpt_length()</kbd> <span>function.</span> <span>All we need to do here is to just return the number; let's say we want</span> <kbd>25</kbd><span>. Then we just need to create a filter, so we'll say</span> <kbd>add_filter</kbd><span>;</span> <kbd>add_action</kbd> <span>means you're adding something, and</span> <kbd>add_filter</kbd> <span>means you're changing something. We want</span> <kbd>excerpt_length</kbd><span>, so we will add</span> <kbd>set_excerpt_length</kbd><span>, and we'll also use the</span> <kbd>adv</kbd> <span>prefix</span><span>:</span></p>
<pre>// Excerpt Length<br/>function adv_set_excerpt_length(){<br/>    return 25;<br/>}</pre>
<p>Let's save this and reload:</p>
<div class="CDPAlignCenter CDPAlign"><img height="783" width="1280" class="aligncenter size-full wp-image-1045 image-border" src="images/ea46b12c-edf4-43d9-a272-9ecc62c1ca37.png" /></div>
<p>Now you can see that we get length of 25. Now, for the <span class="packt_screen">Read More</span> to work, it is pretty easy. We'll go down to where we have the link and update the code as shown here:</p>
<pre>&lt;/p&gt;<br/>&lt;?php the_excerpt(); ?&gt;<br/><br/>&lt;a class="button" href="&lt;?php the_permalink(); ?&gt;"&gt;<br/>Read More&lt;/a&gt;</pre>
<p>We'll reload and click on <span class="packt_screen">Read More</span>. This brings us to that particular post:</p>
<div class="CDPAlignCenter CDPAlign"><img height="376" width="499" class="aligncenter size-full wp-image-1046 image-border" src="images/3e93e2e4-2290-479e-9d74-61720e4bdef3.png" /></div>
<p>Next we will see how to add a comment form and how we can add a featured image to our posts.</p>


            </article>

            
        </section>
    </div>
</body>
</html>