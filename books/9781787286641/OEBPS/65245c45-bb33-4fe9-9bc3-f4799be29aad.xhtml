<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns:pls="http://www.w3.org/2005/01/pronunciation-lexicon" xmlns:ssml="http://www.w3.org/2001/10/synthesis" xmlns:svg="http://www.w3.org/2000/svg">
<head>
  <meta charset="UTF-8" />
  <title>Pages, custom templates, and sub navigation</title>
  <link type="text/css" rel="stylesheet" media="all" href="style.css" />
  <link type="text/css" rel="stylesheet" media="all" href="core.css" />
</head>
<body>
  <div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Pages, custom templates, and sub navigation</h1>
                </header>
            
            <article>
                
<p>Now we'll move from the posts to pages. If we visit the <span class="packt_screen">About</span> page, you can see that it's formatted just like a post, which is definitely not what we want.</p>
<p>We just want the pages to have the title, we don't want metadata, Read More, and stuff like that. So to change all that, we have to create a new file and save it as <kbd>page.php</kbd>.</p>
<p>Now if I go back to that page and reload, it's just a blank white page. It's looking to this file to parse it.</p>
<p>Just to start with, I'll grab what we have in the <kbd>index</kbd> page, paste it in <kbd>page.php</kbd>, and just change some stuff. W<span>e want the</span> <kbd>while</kbd> <span>loop, we'll not use</span> <kbd>get_template_part()</kbd><span>, so we can get rid of that. We want an</span> <kbd>&lt;article&gt;</kbd> <span>tag, and let's give this a class of</span> <kbd>page</kbd><span>. Let's also put in an</span> <kbd>&lt;h2&gt;</kbd> <span>tag. This is where the title will go, so we'll say</span> <kbd>&lt;?php the_title(); ?&gt;</kbd><span>, and right under this, we'll put</span> <kbd>the_content()</kbd>:</p>
<pre>&lt;?php get_header(); ?&gt;<br/><br/>&lt;div class="container content"&gt;<br/>   &lt;div class="main block"&gt;<br/>      &lt;?php if(have_posts()): ?&gt;<br/>         &lt;?php while(have_posts()) : the_post(); ?&gt;<br/>            <strong>&lt;article class="page"&gt;</strong><br/><strong>               &lt;h2&gt;&lt;?php the_title(); ?&gt;&lt;/h2&gt;</strong><br/><strong>               &lt;?php the_content(); ?&gt;</strong><br/><strong>            &lt;/article&gt;</strong><br/>        &lt;?php endwhile; ?&gt;<br/>      &lt;?php else : ?&gt;<br/>         &lt;?php echo wpautop('Sorry, no posts found.'); ?&gt;<br/>      &lt;?php endif; ?&gt;<br/>   &lt;/div&gt;<br/><br/>   &lt;div class="side"&gt;<br/>      &lt;div class="block"&gt;<br/>      &lt;h3&gt;Sidebar Head&lt;/h3&gt;<br/>      &lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit, <br/>       sed do eiusmod tempor incididunt ut <br/>       labore et dolore magna aliqua. Ut enim ad minim veniam, quis <br/>       nostrud exercitation <br/>       ullamco laboris nisi ut aliquip ex ea commodo consequat.&lt;/p&gt;<br/>      &lt;a class="button"&gt;More&lt;/a&gt;<br/>      &lt;/div&gt;<br/>   &lt;/div&gt;<br/>&lt;/div&gt;<br/><br/>&lt;?php get_footer(); ?&gt;</pre>
<p>OK, really simple, save it, let's go to the <span class="packt_screen">About</span> <span>page, and now we have a very simple</span> <span class="packt_screen">About</span> <span>page.</span></p>
<p>If we go to <span class="packt_screen">Services</span>, we find that it uses the same format; even <span class="packt_screen">Sample Page</span> uses the same format. Now I want to show you that we can actually create page templates for certain pages. For instance, let's take the <span class="packt_screen">About</span> page. If I say <span class="packt_screen">New File</span>, save it as <kbd>page-about.php</kbd>, and we'll say <kbd>ABOUT</kbd> and save and reload it, we get <kbd>ABOUT</kbd>:</p>
<div class="CDPAlignCenter CDPAlign"><img height="236" width="406" class="aligncenter size-full wp-image-1078 image-border" src="images/d0d38922-a03f-4514-8b06-c770feeec65c.png" /></div>
<p>Now this isn't going to be on every page; you can see that <span class="packt_screen">Services</span> shows up, <span class="packt_screen">Sample Page</span>, it's only the <span class="packt_screen">About</span> page. So it's using the slug that is up in the URL. We could just as well say page <kbd>services</kbd> and that would work. You would do this when you want something on the <kbd>About</kbd> page that you don't want anywhere else.</p>
<p><span>Now we'll just copy what's in</span> <kbd>page.php</kbd><span>, put it in</span> <kbd>page-about.php</kbd> <span>and then go right above</span> <kbd>the_content()</kbd><span>. There, we'll put a</span> <kbd>&lt;div&gt;</kbd> <span>tag with the</span> <kbd>well</kbd> <span>class, and we'll just put in</span> <kbd>Company Phone</kbd>:</p>
<pre>&lt;article class="page"&gt;<br/>&lt;h2&gt;&lt;?php the_title(); ?&gt;&lt;/h2&gt;<br/>&lt;div class="well"&gt;Company Phone: 555-555-5555&lt;/div&gt;<br/>&lt;?php the_content(); ?&gt;<br/>&lt;/article&gt;</pre>
<p>Now, go back to <span class="packt_screen">About</span>, and you can see that we have the <span class="packt_screen">Company Phone</span> there:</p>
<div class="CDPAlignCenter CDPAlign"><img height="974" width="1280" class="aligncenter size-full wp-image-1079 image-border" src="images/84c9e6fc-0de1-4338-a52c-36709a564de6.png" /></div>
<p>So, it's not on <span class="packt_screen">Services</span>, it's not on <span class="packt_screen">Sample Page</span> or any other pages. You can do this, but I think a better thing to do, when you want to have specific styles or content on certain pages, is to use a template. I'm going to get rid of the <kbd>page-about</kbd> file. I just wanted to show you that this is possible. So we got rid of that, and now we'll create a template. Let's create a new file and save it as <kbd>company-template.php</kbd>. We'll copy what we have in the <kbd>page.php</kbd> file, and paste it right in the <kbd>company-template.php</kbd> file.</p>
<p>Now at the top, we want to add a declaration or comment. Actually, this needs to be in <span>the</span> <kbd>php</kbd> tags. Next, we'll say <kbd>Template Name</kbd> and call this <kbd>Company Layout</kbd>. All we want to do here is to go right below <kbd>the_title()</kbd>, and put the phone number; however, I'll put it in a paragraph tag with a class of <kbd>phone</kbd>, and we'll put a <kbd>1-800-555-5555</kbd> number:</p>
<pre><strong>&lt;?php</strong><br/><strong>/*</strong><br/><strong>    Template Name: Company Layout</strong><br/><strong>*/</strong><br/><strong>?&gt;</strong><br/>&lt;?php get_header(); ?&gt;<br/><br/>&lt;div class="container content"&gt;<br/>   &lt;div class="main block"&gt;<br/>      &lt;?php if(have_posts()): ?&gt;<br/>         &lt;?php while(have_posts()) : the_post(); ?&gt;<br/>            &lt;article class="page"&gt;<br/>            &lt;h2&gt;&lt;?php the_title(); ?&gt;&lt;/h2&gt;<br/>            <strong>&lt;p class="phone"&gt;1-800-555-5555&lt;/p&gt;</strong><br/>            &lt;?php the_content(); ?&gt;<br/>            &lt;/article&gt;</pre>
<p>Now, save this. Let's quickly go into the style sheet and add a style for the <kbd>phone</kbd> class. T<span>his is probably something you would do, but it's just to give you an example to show you that you can have custom templates for certain pages. Let's give it a background,</span> <kbd>border</kbd><span>,</span> <kbd>padding</kbd><span>, and make the font bold</span>:</p>
<pre>.phone{<br/>    background:#f4f4f4;<br/>    border: 1px solid #ccc;<br/>    padding:8px;<br/>    font-weight: bold;<br/>}</pre>
<div class="CDPAlignCenter CDPAlign"><img height="959" width="1280" class="aligncenter size-full wp-image-1080 image-border" src="images/40f44ab7-d929-4406-ad47-f6a983f0c9fc.png" /></div>
<p>Now that we have that created, let's go into our pages, and go to <span class="packt_screen">About</span>, and then, under <span class="packt_screen">Template</span>, we can choose <span class="packt_screen">Company Layout</span>. We'll update this, reload, and now you can see we have the phone number:</p>
<div class="CDPAlignCenter CDPAlign"><img height="793" width="1280" class="aligncenter size-full wp-image-1081 image-border" src="images/b7a6e5cd-1493-4816-870c-d9ff91d9d2c2.png" /></div>
<p>I actually want to put some text in front of it, though. We'll say <kbd>Call Us</kbd>:</p>
<div class="CDPAlignCenter CDPAlign"><img height="969" width="1280" class="aligncenter size-full wp-image-1082 image-border" src="images/21493b10-fedf-458b-a4ed-fd0bd935be4f.png" /></div>
<p>If we go to <span class="packt_screen">Services</span>, you'll not see it because we didn't choose that template. However, I actually do want it for <span class="packt_screen">Services</span>, so we'll simply go into the <kbd>Services</kbd> page and select <span class="packt_screen">Company Layout</span>. Now, that should also have the phone number:</p>
<div class="CDPAlignCenter CDPAlign"><img height="976" width="1280" class="aligncenter size-full wp-image-1083 image-border" src="images/0311d132-c4b8-4420-bf83-642b19138fe3.png" /></div>
<p>So the next thing that I want to show you is how we can create a submenu. What I mean by this is that if we have, let's say, the <span class="packt_screen">About</span> page, <span>the parent page</span>, and in it we have child pages—I had put an <span class="packt_screen">FAQ</span> page and an <span class="packt_screen">Our Team</span> page under the <span class="packt_screen">About</span> page. Now my goal is to have links on the <span class="packt_screen">About</span> page for the child pages, and this is not just for the <span class="packt_screen">About</span> page but any page that has a child. There are quite a few things that we have to do to accomplish this. Let's go to <kbd>page.php</kbd> and remove <span class="packt_screen">Company Layout</span> from the <span class="packt_screen">About</span> page. So, it shouldn't have the phone number anymore.</p>
<p>In <kbd>page.php</kbd>, let's go right under the <kbd>&lt;article&gt;</kbd> tag and say <kbd>&lt;?php wp_list_pages(); ?&gt;</kbd>, as shown in the following code block:</p>
<pre>&lt;article class="page"&gt;<br/><strong>&lt;?php wp_list_pages(); ?&gt;</strong><br/>&lt;h2&gt;&lt;?php the_title(); ?&gt;&lt;/h2&gt;<br/>&lt;p class="phone"&gt;1-800-555-5555&lt;/p&gt;<br/>&lt;?php the_content(); ?&gt;<br/>&lt;/article&gt;</pre>
<p>Let's see what this does:</p>
<div class="CDPAlignCenter CDPAlign"><img height="978" width="1280" class="aligncenter size-full wp-image-1084 image-border" src="images/71699eba-edd3-4b18-ba23-b934c111dd8c.png" /></div>
<p>We can see that it's listing all of the pages that we have on our WordPress site, which obviously isn't what we want. Pay no attention to the style yet because we'll get to that after we get the functionality. We only want to get the <kbd>About</kbd> page and its child pages. <span>So we'll go to the</span> <kbd>page.php</kbd> <span>file, and right above</span> <kbd>wp_list_pages()</kbd> <span>we'll say</span> <kbd>&lt;?php</kbd><span>. We'll create a variable called</span> <kbd>args</kbd> <span>and set that to an array. We'll then say</span> <kbd>child_of</kbd><span>. Now there's no core function to get the parent, so we'll actually create a function called</span> <kbd>get_top_parent()</kbd><span>. Then we also want to say</span> <kbd>title_li</kbd> <span>and set that to nothing. I'll explain that in a bit, but right now, we'll put our</span> <kbd>args</kbd> <span>variable right in</span> <kbd>wp_list_pages()</kbd>:</p>
<pre>&lt;article class="page"&gt;<br/><strong>&lt;?php</strong><br/><strong>    $args = array(</strong><br/><strong>        'child_of' =&gt; get_top_parent(),</strong><br/><strong>        'title_li' =&gt; ''</strong><br/><strong>    );</strong><br/><strong>?&gt;</strong><br/>&lt;?php wp_list_pages(<strong>$args</strong>); ?&gt;<br/>&lt;h2&gt;&lt;?php the_title(); ?&gt;&lt;/h2&gt;<br/>&lt;p class="phone"&gt;1-800-555-5555&lt;/p&gt;<br/>&lt;?php the_content(); ?&gt;<br/>&lt;/article&gt;</pre>
<p>If we go ahead and reload, we'll get an error, because there's no function called <kbd>get_top_parent()</kbd>. So let's go into <kbd>functions.php</kbd> and down at the bottom, create a function called <kbd>get_top_parent()</kbd>. <span>We'll make the</span> <kbd>post</kbd> <span>object available to us by saying</span> <kbd>global $post</kbd><span>. Then, we'll say</span> <kbd>if($post-&gt;post_parent)</kbd><span>, and we'll create a variable called</span> <kbd>$ancestors</kbd> <span>and set it to</span> <kbd>get_post_ancestors()</kbd><span>. We'll then pass in</span> <kbd>$post-&gt;ID</kbd><span>. Now we'll say</span> <kbd>return $ancestors</kbd> <span>and we want the</span> <kbd>0</kbd> <span>index; then, under the</span> <kbd>if</kbd> <span>statement, say</span> <kbd>return $post-&gt;ID</kbd><span>:</span></p>
<pre>function get_top_parent(){<br/>    global $post;<br/>    if($post-&gt;post_parent){<br/>        $ancestors = get_post_ancestors($post-&gt;ID);<br/>        return $ancestors[0];<br/>    }<br/><br/>    return $post-&gt;ID;<br/>}</pre>
<p>Now save this and reload:</p>
<div class="CDPAlignCenter CDPAlign"><img height="141" width="422" class="aligncenter size-full wp-image-1085 image-border" src="images/43e02dfd-910d-478e-83c2-416b530b84df.png" /></div>
<p>Now you can see that we are only getting the child pages of the <span class="packt_screen">About</span> page, which is <span class="packt_screen">FAQ</span> and <span class="packt_screen">Our Team</span>. Now we also want the <span class="packt_screen">About</span> link to show up in here as well because we can go to <span class="packt_screen">FAQ</span>, but we can't get back to <span class="packt_screen">About</span> unless we use the main menu. So let's go back to <kbd>page.php</kbd> and inside the <kbd>&lt;article&gt;</kbd> tag, we'll create a <kbd>&lt;ul&gt;</kbd> tag. <span>Above the</span> <kbd>&lt;ul&gt;</kbd> <span>tag, we'll</span> <span>create a</span> <kbd>&lt;nav&gt;</kbd> <span>tag and give it a class of both</span> <kbd>nav</kbd> <span>and</span> <kbd>sub-nav</kbd><span>. Now</span> <span>under the</span> <kbd>&lt;ul&gt;</kbd> <span>tag, I'll put a</span> <kbd>&lt;span&gt;</kbd> <span>tag and give it a class of</span> <kbd>parent-link</kbd><span>. Inside it, we'll place an</span> <kbd>&lt;a&gt;</kbd> <span>tag, which will go to</span> <kbd>&lt;?php echo get_the_permalink(); ?&gt;</kbd><span>. We'll pass in the</span> <kbd>get_top_parent()</kbd> <span>function there. Then, for the link text we'll say</span> <kbd>&lt;?php echo the_title(); ?&gt;</kbd>:</p>
<pre><strong>&lt;nav class="nav sub-nav"&gt;</strong><br/><strong>   &lt;ul&gt;</strong><br/><strong>      &lt;span class="parent-link"&gt;&lt;a href="&lt;?php echo </strong><br/><strong>          get_the_permalink(get_top_parent()); ?&gt;"&gt;&lt;?php</strong><br/><strong>           echo get_the_title(get_top_parent()); ?&gt;&lt;/a&gt;</strong><br/><strong>      &lt;/span&gt;</strong><br/>      &lt;?php<br/>          $args = array(<br/>              'child_of' =&gt; get_top_parent(),<br/>              'title_li' =&gt; ''<br/>          );<br/>      ?&gt;<br/>      &lt;?php wp_list_pages($args); ?&gt;<br/>   <strong>&lt;/ul&gt;</strong><br/><strong>&lt;/nav&gt;</strong></pre>
<p>Let's save this and take a look:</p>
<div class="CDPAlignCenter CDPAlign"><img height="144" width="449" class="aligncenter size-full wp-image-1086 image-border" src="images/50e7f264-5528-4204-8831-e59aa41714c8.png" /></div>
<p>Now we just have <span class="packt_screen">About</span>. We can navigate using the menu here. However, if we go to <span class="packt_screen">Sample Page</span> or any other page, it's going to still have this even though there's no child links. So, we'll create another short function in the <kbd>functions.php</kbd> file and <span>call</span> <kbd>page_is_parent</kbd><span>. Then, we'll say</span> <kbd>global $post</kbd> <span>and set</span> <kbd>$pages</kbd> <span>equal to</span> <kbd>get_pages()</kbd><span>, and in here, we'll say</span> <kbd>'child_of='</kbd> <span>and concatenate the post ID. Next, we'll say</span> <kbd>return</kbd> <span>and then, we want the number of pages, so we'll</span> <kbd>count($pages)</kbd>:</p>
<pre>function page_is_parent(){<br/>    global $post;<br/> <br/>    $pages = get_pages('child_of='.$post-&gt;ID);<br/>    return count($pages);<br/>}</pre>
<p>If the page count is more than zero, then we know that it's a parent. So let's go back to <kbd>page.php</kbd> and right above the <kbd>&lt;nav&gt;</kbd> tag, we'll put an <kbd>if</kbd> statement, which will end below the <kbd>&lt;nav&gt;</kbd> tag. We'll see <span>if it's a parent <kbd>page_is_parent()</kbd>, or if there's any children <kbd>$post-&gt;post_parent is &gt; 0</kbd>, then we'll do what follows</span>:</p>
<pre><strong>&lt;?php if(page_is_parent() || $post-&gt;post_parent &gt; 0): ?&gt;</strong><br/>&lt;nav class="nav sub-nav"&gt;<br/>   &lt;ul&gt;<br/>      &lt;span class="parent-link"&gt;&lt;a href="&lt;?php echo <br/>          get_the_permalink(get_top_parent()); ?&gt;"&gt;&lt;?php<br/>           echo get_the_title(get_top_parent()); ?&gt;&lt;/a&gt;<br/>      &lt;/span&gt;<br/>      &lt;?php<br/>          $args = array(<br/>              'child_of' =&gt; get_top_parent(),<br/>              'title_li' =&gt; ''<br/>          );<br/>      ?&gt;<br/>      &lt;?php wp_list_pages($args); ?&gt;<br/>   &lt;/ul&gt;<br/>&lt;/nav&gt;<br/><strong>&lt;?php endif; ?&gt;</strong></pre>
<p><span>L</span><span>et's save that and then go back to</span> <span class="packt_screen">Sample Page</span><span>. We can see that menu is now gone, but if we go to <span class="packt_screen">About</span> it's still there, because it has the child pages.</span></p>
<p>So everything is working correctly.</p>
<p>Now I just want to fix the display; I want it to move it and make it appear a little better. To do this, let's go to our style sheet <span>and say</span> <kbd>.sub-nav</kbd><span>. We'll then place some margin on the top, floating it to the right and setting it to <kbd>300px</kbd> wide. Then we'll float</span> <kbd>ul</kbd> <span>to the right.</span> <span>Next, the parent link, which in this case is <span class="packt_screen">About</span>; we'll float this to left and make it black, bold, and add a border to the right. Then, we'll make the parent link black, and we'll use</span> <kbd>current_page_item</kbd><span>, because whatever page we're on, we want that to be bold</span>:</p>
<pre>.sub-nav{<br/>  margin-top:10px;<br/>  float:right;<br/>  width:300px;<br/>}<br/><br/>.sub-nav ul{<br/>  float:right;<br/>}<br/><br/>.sub-nav .parent-link{<br/>  font-weight: bold;<br/>  color:#000;<br/>  float:left;<br/>  margin-right:20px;<br/>  padding-right:20px;<br/>  border-right:1px solid #009acd;<br/>}<br/><br/>.sub-nav .parent-link a{<br/>  font-weight: bold;<br/>  color:#000;<br/>}<br/><br/>.sub-nav .current_page_item{<br/>  font-weight: bold;<br/>}</pre>
<p>Let's save this and see what that looks like:</p>
<div class="CDPAlignCenter CDPAlign"><img height="975" width="1280" class="aligncenter size-full wp-image-1087 image-border" src="images/347089dd-4346-4213-948a-4977b273828f.png" /></div>
<p>You can see that we have <span class="packt_screen">About</span>, and if we go to <span class="packt_screen">FAQ</span> that stays bold; if we go to <span class="packt_screen">Our Team</span> even that's bold. This looks a lot better.</p>
<p>Next, we'll clear the float. <span>To do this, we'll go to</span> <kbd>page.php</kbd><span>, and under</span> <kbd>&lt;/nav&gt;</kbd> <span>we'll add</span> <kbd>&lt;div class="clr"&gt;</kbd><span>. Then, we'll go to our style sheet and add</span> <kbd>.clr</kbd> <span>and say</span> <kbd>clear:both</kbd><span>:</span></p>
<pre>.clr{<br/>    clear:both;<br/>}</pre>
<p>So now we see that it's above the title on the page:</p>
<div class="CDPAlignCenter CDPAlign"><img height="131" width="421" class="aligncenter size-full wp-image-1088 image-border" src="images/dbb703dc-6d87-436f-9a6e-129439b7da50.png" /></div>
<p>We did quite a bit in this section.</p>
<p>We set up our pages, and we saw how to create custom pages, custom templates, and also, how to create a sub navigation. In the next section, we'll get into widgets.</p>


            </article>

            
        </section>
    </div>
</body>
</html>