<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns:pls="http://www.w3.org/2005/01/pronunciation-lexicon" xmlns:ssml="http://www.w3.org/2001/10/synthesis" xmlns:svg="http://www.w3.org/2000/svg">
<head>
  <meta charset="UTF-8" />
  <title>Working with Theme Widgets</title>
  <link type="text/css" rel="stylesheet" media="all" href="style.css" />
  <link type="text/css" rel="stylesheet" media="all" href="core.css" />
</head>
<body>
  <div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Working with Theme Widgets</h1>
                </header>
            
            <article>
                
<p>In this section, we'll take a look at widgets.</p>
<p>Right now, we have a sidebar, but this is just static content in our php file. So we want this to come from the widget system. Also, we should be able to add multiple widgets in the sidebar. Now, on the blog page, and on any other page, this is going to be the only widget aside from a custom Home page that we'll create later on. However, we will add those positions in our <kbd>functions</kbd> file.</p>
<p>So, let's open up <kbd>functions.php</kbd>, and <span>go right under the</span> <kbd>after_theme_setup</kbd> <span>action; this will be to set up widget locations. We'll create a function, call it</span> <kbd>init_widgets()</kbd> <span>and it will take an</span> <kbd>id</kbd><span>; then, we'll say</span> <kbd>register_sidebar</kbd><span>. Now, even though this is called</span> <kbd>register_sidebar</kbd><span>, this is used with all widget positions, not just a sidebar. It takes in an array and it's going to take a</span> <kbd>name</kbd><span>; this happens to be <kbd>Sidebar</kbd>, but it could be anything. Then, we'll also say</span> <kbd>before_widget</kbd> <span>and</span> <kbd>after_widget</kbd><span>. Also, we'll say</span> <kbd>before_title</kbd> <span>and</span> <kbd>after_title</kbd> <span>of the widget</span>:</p>
<pre>add_action('after_setup_theme', 'adv_theme_support');<br/><br/><strong>//Widget Locations</strong><br/><strong>function init_widgets($id){</strong><br/><strong>    register_sidebar(array(</strong><br/><strong>        'name' =&gt; 'Sidebar',</strong><br/><strong>        'id' =&gt; 'sidebar',</strong><br/><strong>        'before_widget' =&gt; '',</strong><br/><strong>        'after_widget' =&gt; '',</strong><br/><strong>        'before_title' =&gt; '',</strong><br/><strong>        'after_title' =&gt; ''</strong><br/><strong>    ));</strong><br/><strong>}</strong></pre>
<p>So, basically, these will be HTML tags that we want. If we say <kbd>index.php</kbd> and look at the sidebar, it has <kbd>&lt;div&gt;</kbd> with the class of <kbd>block</kbd>:</p>
<pre>&lt;div class="side"&gt;<br/>   <strong>&lt;div class="block"&gt;</strong><br/>   &lt;h3&gt;Sidebar Head&lt;/h3&gt;</pre>
<p>Now I don't want to add this <kbd>div</kbd> element in <kbd>functions.php</kbd>; so let's put it in <kbd>index.php</kbd> <span>and</span> <kbd>&lt;div class="block"&gt;</kbd><span>. Let's also add a class called</span> <kbd>side-widget</kbd> <span>and, after widget, we'll close that</span> <kbd>&lt;/div&gt;</kbd> element<span>. For the title, I'll put</span> <kbd>&lt;h3&gt;</kbd><span>:</span></p>
<pre>'before_widget' =&gt; '&lt;div class="block side-widget"&gt;',<br/>'after_widget'  =&gt; '&lt;/div&gt;',<br/>'before_title'  =&gt; '&lt;h3&gt;',<br/>'after_title'   =&gt; '&lt;/h3&gt;'</pre>
<p>Let's save this and then go into <kbd>index.php</kbd>. <span>We'll take out everything that's in this</span> <kbd>side</kbd> <span>div element and check to see whether there are any widgets in that position. To do this, we'll say</span> <kbd>if(is_active_sidebar)</kbd> <span>and then pass in the widget ID, which is</span> <kbd>sidebar</kbd><span>. Then we'll say</span> <kbd>&lt;?php dynamic_sidebar(); ?&gt;</kbd> <span>and pass in the ID,</span> <kbd>sidebar</kbd><span>:</span></p>
<pre>&lt;div class="side"&gt;<br/>   <strong>&lt;?php if(is_active_sidebar('sidebar')) : ?&gt;</strong><br/><strong>      &lt;?php dynamic_sidebar('sidebar'); ?&gt;</strong><br/><strong>   &lt;?php endif; ?&gt;</strong><br/>&lt;/div&gt;</pre>
<p><span>If we look at the index page, nothing's there because we haven't added any widgets:</span></p>
<div class="CDPAlignCenter CDPAlign"><img height="1024" width="1280" class="aligncenter size-full wp-image-1089 image-border" src="images/904ac774-4df9-47d0-a1b6-db3f560f60a8.png" /></div>
<p>Now we'll need to replace all of the static sidebar code. Let's copy it; we'll start with <kbd>archive.php</kbd>. Then, we'll just paste that in. We'll go to <kbd>page.php</kbd>. Of course, you don't need to have a sidebar with all these pages: <kbd>search</kbd>, <kbd>single</kbd>, and <kbd>company-template</kbd>, <span>but we're going to</span>.</p>
<p>Now, we'll go to our backend and then to <span class="packt_screen">Appearance</span>:</p>
<div class="CDPAlignCenter CDPAlign"><img height="680" width="1280" class="aligncenter size-full wp-image-1091 image-border" src="images/16cf061e-9907-404d-aada-7183defbf891.png" /></div>
<p>Now see how there's no widget. We need to initialize it, so back to <kbd>functions.php</kbd>, and then, right under <kbd>init_widgets()</kbd> we need to say <kbd>add_action()</kbd>. Now the hook we want to use is <kbd>widgets_init</kbd>, and then we just want to put the name of our function, which is <kbd>init_widgets</kbd>:</p>
<pre>add_action('widgets_init', 'init_widgets');</pre>
<p>Let's go back to our backend, reload, and now under <span class="packt_screen">Appearance</span>, you should be able to go to <span class="packt_screen">Widgets</span>:</p>
<div class="CDPAlignCenter CDPAlign"><img src="images/9b3f5e08-5594-43fc-bae4-25f8d934468f.png" /></div>
<p>Now we'll add a custom <span class="packt_screen">Text</span> widget, and let's just put title; we'll say <kbd>My Text Widget</kbd>. Then, I'll just paste a sentence or two in <span class="packt_screen">Content</span>, and click on <span class="packt_screen">Save</span>:</p>
<div class="CDPAlignCenter CDPAlign"><img height="1024" width="1280" class="aligncenter size-full wp-image-1092 image-border" src="images/2f66f9c5-01ca-4ae5-8415-6311950b8cd6.png" /></div>
<p>Now go back to our frontend and reload:</p>
<div class="CDPAlignCenter CDPAlign"><img height="1024" width="1280" class="aligncenter size-full wp-image-1093 image-border" src="images/6185538b-833a-4b4c-8965-3603df9f9ee4.png" /></div>
<p>So this is coming from the <span class="packt_screen">Text</span> widget.</p>
<p>Let's add a button in here as well, just for looks. Let's also put two line breaks. You can put whatever you like in a custom <span class="packt_screen">Text</span> widget:</p>
<div class="CDPAlignCenter CDPAlign"><img height="412" width="344" class="aligncenter size-full wp-image-1094 image-border" src="images/9f106c79-4a7d-44ca-86be-ab2fd883effc.png" /></div>
<p>Now, another thing that we could do is to add some kind of dynamic widget, like, let's say, <kbd>Categories</kbd>.</p>
<p>Let's take that <span class="packt_screen">Categories</span> widget, put it in <span class="packt_screen">Sidebar</span>, and we'll save it. Let's go take a look:</p>
<div class="CDPAlignCenter CDPAlign"><img height="1003" width="1280" class="aligncenter size-full wp-image-1095 image-border" src="images/0b5be00f-a53c-4f6e-bfce-01b9e3bba6d5.png" /></div>
<p>I want to make this look a little better, which we can do that with CSS. L<span>et's go to the bottom and say</span> <kbd>.side-widget</kbd><span>. I'll add</span> <kbd>margin-bottom: 20px</kbd><span>, that will move it down a little. Then, to do the list items, we'll say</span> <kbd>list-style:none</kbd><span>; we'll give it</span> <kbd>line-height</kbd> <span>of</span> <kbd>2.1em</kbd><span>, and for</span> <kbd>border-bottom</kbd><span>, we'll do</span> <kbd>dotted</kbd><span>, with the color gray</span>:</p>
<pre>.side-widget{<br/>    margin-bottom: 20px;<br/>}<br/><br/>.side-widget li{<br/>    list-style: none;<br/>    line-height: 2.1em;<br/>    border-bottom: 1px dotted #ccc;<br/>}</pre>
<p>Save this.</p>
<p>Now, it looks a lot better:</p>
<div class="CDPAlignCenter CDPAlign"><img height="1004" width="1280" class="aligncenter size-full wp-image-1097 image-border" src="images/d12b358a-c31c-47d3-b31e-6c4c8a205587.png" /></div>
<p>We can also put, let's say, <kbd>Recent Posts</kbd>, and change this to <kbd>3</kbd>:</p>
<div class="CDPAlignCenter CDPAlign"><img height="398" width="429" class="aligncenter size-full wp-image-1096 image-border" src="images/e5fd80e9-6910-4eee-b684-0a7d0deb3bb3.png" /></div>
<p>We actually didn't give a title for the gallery. So, let's just say <kbd>Photo Gallery</kbd>:</p>
<div class="CDPAlignCenter CDPAlign"><img height="412" width="515" class="aligncenter size-full wp-image-1099 image-border" src="images/47f3bfc3-d414-4627-b129-060ecaec7f26.png" /></div>
<p>Now, I'll add the rest of the widgets into <kbd>functions.php</kbd>, or the rest of the widget positions, even though we'll not do it in this section. In the next section, we'll create a custom home page with those widgets.</p>
<p>We'll go right under <kbd>init_widgets()</kbd>, and copy and paste it four more times. So <kbd>Sidebar</kbd>, then we'll enter the <kbd>Showcase</kbd> area and change the class name. Then we'll have <kbd>Box 1</kbd>, <kbd>Box 2</kbd>, and <kbd>Box 3</kbd>. This will have a class of <kbd>box</kbd> and <kbd>box1</kbd>. I'll actually replace these two with <kbd>box</kbd> and <kbd>box1</kbd>. In next <kbd>register_sidebar</kbd> we'll change <kbd>name</kbd> to <kbd>Box 2</kbd>, and change <kbd>name</kbd> in final <kbd>register_sidebar</kbd> to <kbd>3</kbd>. Save it, and now if we were to go back into the widgets area, you can now see that we have those widgets. At least, we have the positions. If we put something in them now, nothing's going to happen because we don't have them in our template.</p>


            </article>

            
        </section>
    </div>
</body>
</html>